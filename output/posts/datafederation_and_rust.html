<html>
  <head>
    <title>Elias' homepage</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/base16/black-metal-bathory.min.css">
	<meta charset="utf-8">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
	<script>hljs.highlightAll();</script>
<style>

:root {

    --base-font-size: 18px; /* Increased from typical 16px */
    --heading-multiplier: 1.5;
    
    --main-font: 'Courier New', 'Lucida Console', monospace;
    --alt-font: 'Share Tech Mono', 'Consolas', monospace;

    --accent: #b388ff;  /* Light purple */
    --accent-hover: #d1b3ff;  /* Very light purple */
    --accent-visited: #c7a3ff;  /* Light visited color */
    --accent-glow: rgba(179, 136, 255, 0.4);  /* Stronger glow */
    --terminal-link: #66ff99;  /* Bright terminal green */
    
    /* Original colors */
    --main-bg: #000000;
    --secondary-bg: #0a0a12;
    --text-primary: #e0e0e0;
    --text-secondary: #a0a0c0;
    --glitch-color1: #00ffff;
    --glitch-color2: #ff00ff;
}

img {
  max-width: 900px;
  width: auto;
  height: auto;
}

body {
    background-color: var(--main-bg);
    color: var(--text-primary);
    font-family: var(--main-font);
    line-height: 1.7;
    font-size: 18px;
    margin: 0;
    padding: 0;
    background-image: 
        radial-gradient(circle at 10% 20%, var(--accent-glow) 0%, transparent 20%),
        radial-gradient(circle at 90% 80%, var(--accent-glow) 0%, transparent 20%);
    background-attachment: fixed;
    overflow-x: hidden;
}


h1, h2, h3 {
    color: var(--text-primary);
    font-weight: normal;
    text-transform: uppercase;
    letter-spacing: 2px;
}

h1 {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
    position: relative;
    display: inline-block;
}

h1::after {
    content: '_';
    animation: blink 1s step-end infinite;
}

@keyframes blink {
    from, to { opacity: 0; }
    50% { opacity: 1; }
}

nav {
    background-color: rgba(10, 10, 18, 0.8);
    backdrop-filter: blur(5px);
    padding: 1rem;
    position: sticky;
    top: 0;
    z-index: 100;
}

nav ul {
    display: flex;
    justify-content: center;
    list-style: none;
    padding: 0;
    margin: 0;
    gap: 2rem;
}

main {
    max-width: 900px;
    margin: 2rem auto;
    padding: 0 2rem;
}

footer {
    text-align: center;
    padding: 2rem;
    font-size: 0.8rem;
    color: var(--text-secondary);
    border-top: 1px solid var(--accent);
}

/* Glitch effect (use sparingly) */
.glitch {
    position: relative;
}

.glitch:hover::before, .glitch:hover::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.glitch:hover::before {
    color: var(--glitch-color1);
    animation: glitch-effect 3s infinite linear;
    z-index: -1;
}

.glitch:hover::after {
    color: var(--glitch-color2);
    animation: glitch-effect 2s infinite linear reverse;
    z-index: -2;
}

@keyframes glitch-effect {
    0% { transform: translate(0); }
    20% { transform: translate(-3px, 3px); }
    40% { transform: translate(-3px, -3px); }
    60% { transform: translate(3px, 3px); }
    80% { transform: translate(3px, -3px); }
    100% { transform: translate(0); }
}

/* Terminal-like elements */
.terminal {
    background-color: var(--secondary-bg);
    border: 1px solid var(--accent);
    padding: 1rem;
    font-family: monospace;
    position: relative;
    margin: 2rem 0;
}

.terminal::before {
    content: '>';
    position: absolute;
    left: 0.5rem;
    top: 0.5rem;
    color: var(--terminal-green);
}

.terminal p {
    margin: 0;
    padding-left: 1.5rem;
    color: var(--text-secondary);
}

/* Responsive design */
@media (max-width: 768px) {
    nav ul {
        flex-direction: column;
        gap: 0.5rem;
    }
    
    h1 {
        font-size: 1.8rem;
    }
}

a {
    color: var(--accent);
    text-decoration: none;
    position: relative;
    font-weight: bold;
    transition: all 0.3s ease;
    padding: 0 2px;
}

a:hover {
    color: var(--accent-hover);
    text-shadow: 0 0 8px var(--accent-glow);
    background-color: rgba(138, 92, 255, 0.1);
}

/* Underline animation */
a::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 2px;
    bottom: -2px;
    left: 0;
    background: linear-gradient(90deg, var(--accent), transparent);
    transform: scaleX(0);
    transform-origin: bottom right;
    transition: transform 0.4s ease;
}

a:hover::after {
    transform: scaleX(1);
    transform-origin: bottom left;
    background: linear-gradient(90deg, var(--accent-hover), transparent);
}

/* Visited links */
a:visited {
    color: #c792ff; /* Slightly different shade for visited links */
}

/* Active/focused links */
a:active, a:focus {
    color: var(--text-primary);
    outline: 1px dotted var(--accent);
    background-color: rgba(138, 92, 255, 0.2);
}

/* Special link styles for navigation */
nav a {
    padding: 0.5rem 1rem;
    border: 1px solid transparent;
}

nav a:hover {
    border: 1px solid var(--accent);
    background-color: rgba(138, 92, 255, 0.15);
}

nav a::after {
    display: none; /* Remove underline effect from nav links */
}

/* Terminal-style links */
.terminal a {
    color: var(--terminal-green);
}

.terminal a:hover {
    color: #00ff88;
    text-shadow: 0 0 5px rgba(0, 255, 136, 0.5);
}

.terminal a::after {
    background: linear-gradient(90deg, var(--terminal-green), transparent);
}
.center-image {
    display: flex;
    justify-content: center;
    margin: 2rem 0;
    position: relative;
}

.center-image img {
    width: 150px;
    transition: all 0.3s ease;
}



blockquote {
    font-family: var(--alt-font);
    font-size: 1.2rem;
    color: var(--text-secondary);
    border-left: 3px solid var(--accent);
    background: rgba(10, 10, 30, 0.3);
    padding: 1.5rem 2rem;
    margin: 2rem 0;
    position: relative;
    line-height: 1.8;
    border-radius: 0 4px 4px 0;
    box-shadow: 0 0 15px rgba(102, 0, 204, 0.1);
    overflow: hidden;
}

blockquote::before {
    content: '"';
    font-family: serif;
    font-size: 4rem;
    color: var(--accent-glow);
    position: absolute;
    left: 0.5rem;
    top: 0.5rem;
    line-height: 1;
    opacity: 0.3;
}

blockquote::after {
    content: '';
    position: absolute;
    right: 0;
    bottom: 0;
    width: 30%;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--accent), transparent);
}

blockquote p {
    margin: 0;
    position: relative;
    z-index: 1;
}

blockquote footer {
    font-size: 0.9rem;
    text-align: right;
    margin-top: 1rem;
    color: var(--accent);
    font-style: normal;
}

blockquote footer::before {
    content: '— ';
}

/* Glitch effect on hover */
blockquote:hover {
    animation: glitch-text 0.5s linear infinite;
    text-shadow: 0 0 5px var(--accent-glow);
}

@keyframes glitch-text {
    0% { transform: translate(0); }
    20% { transform: translate(-1px, 1px); }
    40% { transform: translate(1px, -1px); }
    60% { transform: translate(1px, 1px); }
    80% { transform: translate(-1px, -1px); }
    100% { transform: translate(0); }
}


img {
    filter: brightness(0.7) contrast(1.1);
    transition: filter 0.4s ease;
}

/* Hover effect to slightly reveal original */
img:hover {
    filter: brightness(0.85) contrast(1.1);
}


     </style>
  </head>
  <body class="hack main container">
	<a href="https://elias.sh">< back to home</a>
	<main>
	<h1>Data Federation and Trustfall</h1>
	<h6>2023-08-29</h6>
	<p>Data federation is an approach that consolidates data from multiple sources into a single virtual view. This method eradicates data duplication and the formation of data silos, currently drawing significant attention from industry players like Databricks, Starburst, and major cloud providers such as AWS (Athena and Redshift Spectrum). But why is this trend gaining momentum?</p>
<p><a href="https://www.starburst.io/blog/data-federation-and-data-virtualization-never-worked-in-the-past-but-now-its-different/">Daniel Abadi says in his post about the subject</a> “Thirty years ago it was already commonplace for large businesses to have hundreds — even thousands of different database instances managing data from the variety of different applications running at that business”. This situation resulted in the proliferation of data silos, complicating the retrieval of answers that required combining information from various sources.</p>
<p>Traditionally, organizations addressed this challenge by building ETL (extract, transform, load) pipelines to centralize data into a single warehouse, such as AWS Redshift (where I had the opportunity to work during my time at Amazon :P). However, this approach introduces friction, requiring ongoing pipeline maintenance. Moreover, running these jobs continuously may impact application performance, leading many to schedule batch jobs at night, resulting in a centralized view that is at least one day delayed.</p>
<p><img src="/datafederation_and_rust/Untitled.png" alt="" /></p>
<p>A contrasting approach involves employing a data federation system capable of translating user requests across different data sources. This becomes especially valuable when merging data from different sources.</p>
<p><img src="/datafederation_and_rust/Untitled%201.png" alt="" /></p>
<p>This methodology enables the retrieval of more &quot;fresh&quot; data, querying directly from where it resides. A practical example involves using Presto to query diverse data sources.</p>
<p>Digging into the Presto architecture, outlined in the <a href="https://trino.io/Presto_SQL_on_Everything.pdf">Presto white paper</a>, the coordinator manages complex tasks like optimizing query plans, while the optimizer/planner transforms SQL queries (SQL is a declarative language, so it does not tell HOW things should be executed, but WHAT the user wants) into executable plans. It will also break the request into smaller tasks and split it between the workers so it can be run in parallel. Presto's ability to return results incrementally, rather than waiting for completion, adds to its appeal.</p>
<p><img src="/datafederation_and_rust/Untitled%202.png" alt="" /></p>
<p>But we were talking about taking a user request and translating it into the commands of different data sources, so let’s jump into the worker which is responsible for fetching the data from a diverse set of data sources. To connect Presto to the rest of the world, you need to implement the <a href="https://prestodb.io/docs/current/develop/connectors.html">Connector</a> interface. It is the Connector which will helps Presto translate its internal representation to where the data is stored.</p>
<p>Presto provides a unified database feel for answering queries, but what if we could query different APIs as seamlessly as we do with Presto?</p>
<h2>Querying (almost) everything</h2>
<p>Enter <a href="https://github.com/obi1kenobi/trustfall">Trustfall</a>, a Rust-based project enabling users to query almost any data source, from APIs and databases to various files on disk — and even AI models.</p>
<p>To connect Trustfall to diverse data sources, users need to define the schema and craft an adapter capable of communicating with the data source. As the user sends a query, the frontend compiles it into a lazily evaluated intermediate representation. During interpretation, the adapter is invoked to fetch the required data. For more insights, check out <a href="https://www.hytradboi.com/2022/how-to-query-almost-everything">this informative talk</a>.</p>
<p><img src="/datafederation_and_rust/Untitled%203.png" alt="" /></p>
<p>This approach allows you to do very cool things such as cross-API queries. We can see a demo of a query responding “<em>Which GitHub Actions are used in projects on the front page of HackerNews with &gt;=10 points?” (which is available on the repo readme)</em></p>
<p><img src="/datafederation_and_rust/query-demo.gif" alt="" /></p>
<h2>Why am I talking about Trustfall?</h2>
<p>Well, it's an interesting project :). But I also got the chance to <a href="https://github.com/obi1kenobi/trustfall/commits/main/?author=era">collaborate with it a little bit</a>.</p>
	</main>
        <div class="footer">
      Built with <a href="https://github.com/era/tinylang">TinyLang</a> + <a href="https://github.com/era/squid">Squid</a>.
    </div>

  </body>
</html>
